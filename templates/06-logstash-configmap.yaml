apiVersion: v1
kind: ConfigMap
metadata:
  name: logstash-config
  namespace: {{ .Values.namespace }}
data:
  logstash.conf: |-
    input {
      http {
        port => 8080
      }
    }
    filter {
      prune {
        blacklist_values => {
          "log" => "(MYSQL_PASSWORD|AWS_SECRET)"
        }
      }
    }
    output {
      loggly {
        key => "7221d0f1-31e6-4ea0-ac0d-d2accbbe15f4"
        tag => "logstash,kubernetes"
        host => "logs-01.loggly.com"
        proto => "https"
      }
    }
